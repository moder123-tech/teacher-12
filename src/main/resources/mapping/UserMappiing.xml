<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.teacher.dao.UserDao">

    <resultMap id="BaseResultMap" type="cn.com.teacher.bean.UserInformation">
        <id column="u_id" jdbcType="DECIMAL" property="u_id"/>
        <result column="u_number" jdbcType="VARCHAR" property="u_number"/>
        <result column="u_password" jdbcType="VARCHAR" property="u_password"/>
        <result column="u_head" jdbcType="VARCHAR" property="u_head"/>
        <result column="u_name" jdbcType="VARCHAR" property="u_name"/>
        <result column="u_state" jdbcType="VARCHAR" property="u_state"/>
        <result column="u_time" jdbcType="VARCHAR" property="u_time"/>
    </resultMap>

    <sql id="UserInformation">
        u_id
        ,u_number,u_password,u_head,u_name,u_state,u_time
    </sql>

    <insert id="insertUser" parameterType="cn.com.teacher.bean.UserInformation" useGeneratedKeys="true"
            keyProperty="uid">
        <selectKey keyProperty="u_id" order="AFTER" resultType="java.lang.Integer">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into UserInformation(u_number,u_password,u_name,u_state)
        values(#{u_number},#{u_password},#{u_name},#{u_state})
    </insert>

    <update id="updateUpdateUploadImage" parameterType="cn.com.teacher.bean.UserInformation">
        UPDATE UserInformation
        SET
        <if test="u_head != null">
            u_head = #{u_head,jdbcType=VARCHAR}
        </if>
        <where>
            <if test="u_number != null">
                u_number=#{u_number,jdbcType=VARCHAR}
            </if>
        </where>


    </update>

    <update id="updateUserInformation" parameterType="java.lang.String">
        UPDATE UserInformation
        SET
        <if test="u_password != null">
            u_password = #{u_password,jdbcType=VARCHAR},
        </if>
        <if test="u_name != null">
            u_name = #{u_name,jdbcType=VARCHAR}
        </if>
        <where>
            <if test="u_number != null">
                u_number=#{u_number,jdbcType=VARCHAR}
            </if>
        </where>
    </update>

    <update id="updateUser">
        UPDATE UserInformation
        SET
        <if test="u_password != null">
            u_password = #{u_password,jdbcType=VARCHAR}
        </if>
        <where>
            <if test="u_number != null">
                u_number=#{u_number,jdbcType=VARCHAR}
            </if>
        </where>
    </update>

    <update id="updateUsers">
        UPDATE UserInformation
        SET
        <if test="u_password != null">
            u_password = #{u_password,jdbcType=VARCHAR},
        </if>
        <if test="u_state != null">
            u_state = #{u_state,jdbcType=VARCHAR}
        </if>
        <where>
            <if test="u_number != null">
                u_number=#{u_number,jdbcType=VARCHAR}
            </if>
        </where>
    </update>

    <update id="updateUserTime">
        UPDATE UserInformation
        SET
        <if test="u_time != null">
            u_time = #{u_time,jdbcType=VARCHAR}
        </if>
        <where>
            <if test="u_number != null">
                u_number=#{u_number,jdbcType=VARCHAR}
            </if>
        </where>
    </update>

    <delete id="deleteUser">
        delete
        from UserInformation
        <where>
            <if test="u_number != null">
                u_number = #{u_number,jdbcType=VARCHAR}
            </if>
        </where>

    </delete>


    <select id="getUser" resultType="cn.com.teacher.bean.UserInformation" parameterType="java.lang.String">
        select
        <include refid="UserInformation"/>
        from UserInformation
        <where>
            <if test="u_number != null">
                u_number=#{u_number,jdbcType=VARCHAR}
            </if>
        </where>

    </select>

    <select id="getUserImage" resultType="java.lang.String">
        select u_head from UserInformation
        <where>
            <if test="u_number != null">
                u_number=#{u_number,jdbcType=VARCHAR}
            </if>
        </where>
    </select>

    <select id="selectAllUsers" resultType="cn.com.teacher.bean.UserInformation">
        select
        <include refid="UserInformation"/>
        from UserInformation
        <where>
            <if test="u_number != null">
                u_number!=#{u_number,jdbcType=VARCHAR} and u_state = 0
            </if>
        </where>
    </select>

</mapper>
